var algoliaConfig={analytics:!1,apiKey:"f459ef9d28d6ce02539b5c2128cbfc38",appId:"PQ2T33DWYG",indexName:"-'dev_wisdomfurnace' -'wisdomfurnace_zh'",personalization:!1},content_type={authors:"作者",event:"演讲",post:"文章",project:"项目",publication:"出版物",slides:"幻灯片"},i18n={no_results:"没有找到结果",placeholder:"搜索...",results:"搜索结果"};import algoliasearch from"https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch.esm.browser.js";if(algoliaConfig.analytics){let e="https://cdn.jsdelivr.net/npm/search-insights@2.0.2/dist/search-insights.iife.min.js";!function(e,t,n,s,o,i,a){e.AlgoliaAnalyticsObject=o,e[o]=e[o]||function(){(e[o].queue=e[o].queue||[]).push(arguments)},i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script",e,"aa")}function getTemplate(e){return document.querySelector(`#${e}-template`).innerHTML}function getSearchQuery(e){return decodeURIComponent((location.search.split(e+"=")[1]||"").split("&")[0]).replace(/\+/g," ")}document.addEventListener("DOMContentLoaded",()=>{let e=getSearchQuery("q");if(e){$("body").addClass("searching"),$(".search-results").css({opacity:0,visibility:"visible"}).animate({opacity:1},200);let e=document.querySelector("#search-common-queries");e!==null&&(e.style.display="none")}if(typeof instantsearch=="function"&&$("#search-box").length){const e=instantsearch({indexName:algoliaConfig.indexName,searchClient:algoliasearch(algoliaConfig.appId,algoliaConfig.apiKey),searchParameters:{clickAnalytics:algoliaConfig.analytics,enablePersonalization:algoliaConfig.personalization},searchFunction(e){e.state.query&&e.search()},routing:{router:instantsearch.routers.history({parseURL(){return{q:getSearchQuery("q")}}}),stateMapping:{stateToRoute(e){const t=e[algoliaConfig.indexName];return{q:t.query}},routeToState(e){return{[algoliaConfig.indexName]:{query:e.q}}}}}});let n=void 0,s=document.querySelector("#search-hits"),t=document.querySelector("#search-common-queries");if(e.addWidget(instantsearch.widgets.searchBox({container:"#search-box",autofocus:!0,showReset:!0,placeholder:i18n.placeholder,queryHook(e,o){e===""?(s.style.display="none",t!==null&&(t.style.display="block")):(t!==null&&(t.style.display="none"),s.style.display="block"),n&&clearTimeout(n),n=setTimeout(()=>o(e),300)}})),e.addWidget(instantsearch.widgets.infiniteHits({container:"#search-hits",escapeHTML:!0,templates:{empty:'<div class="search-no-results">'+i18n.no_results+"</div>",item:getTemplate("search-hit-algolia")},cssClasses:{loadMore:"btn btn-outline-primary"}})),e.on("render",function(){$(".search-hit-type").each(function(){let e=$(this).text();e in content_type&&$(this).text(content_type[e])})}),algoliaConfig.analytics){const t=instantsearch.middlewares.createInsightsMiddleware({insightsClient:window.aa,insightsInitParams:{useCookie:!0}});e.use(t)}e.start()}})